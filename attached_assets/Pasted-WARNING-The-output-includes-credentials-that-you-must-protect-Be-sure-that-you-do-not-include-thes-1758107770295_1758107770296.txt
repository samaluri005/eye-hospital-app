WARNING: The output includes credentials that you must protect. Be sure that you do not include these credentials in your code or check the credentials into your source control. For more information, see https://aka.ms/azadsp-cli
Service principal created: appId=4cf22fb5-ac52-4ee6-92f8-176c1db47182 tenant=2328c8fc-e1fb-4f12-9af1-0f50b28bb383
Granting Key Vault secret GET/list permissions to service principal...
ERROR: Cannot set policies to a vault with '--enable-rbac-authorization' specified
PS /home/sam> # Set your variables from the deployment           
PS /home/sam> KV_NAME="ehmsdevKeyVault9256b2"
KV_NAME=ehmsdevKeyVault9256b2: The term 'KV_NAME=ehmsdevKeyVault9256b2' is not recognized as a name of a cmdlet, function, script file, or executable program.
Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
PS /home/sam> SP_APP_ID="4cf22fb5-ac52-4ee6-92f8-176c1db47182"
SP_APP_ID=4cf22fb5-ac52-4ee6-92f8-176c1db47182: The term 'SP_APP_ID=4cf22fb5-ac52-4ee6-92f8-176c1db47182' is not recognized as a name of a cmdlet, function, script file, or executable program.
Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
PS /home/sam> RG_NAME="ehmsdev-rg-9256b2"
RG_NAME=ehmsdev-rg-9256b2: The term 'RG_NAME=ehmsdev-rg-9256b2' is not recognized as a name of a cmdlet, function, script file, or executable program.
Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
PS /home/sam> 
PS /home/sam> # Grant the correct RBAC permission
PS /home/sam> KV_RESOURCE_ID=$(az keyvault show --name "$KV_NAME" --resource-group "$RG_NAME" --query id -o tsv)
KV_RESOURCE_ID=$(az keyvault show --name "$KV_NAME" --resource-group "$RG_NAME" --query id -o tsv): The term 'KV_RESOURCE_ID=$(az keyvault show --name "$KV_NAME" --resource-group "$RG_NAME" --query id -o tsv)' is not recognized as a name of a cmdlet, function, script file, or executable program.
Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
PS /home/sam> az role assignment create --assignee "$SP_APP_ID" --role "Key Vault Secrets User" --scope "$KV_RESOURCE_ID"
usage error: --assignee can't be an empty string. Either omit it or provide a non-empty string.
PS /home/sam> 